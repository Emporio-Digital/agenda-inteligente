generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  // A integra√ß√£o Vercel+Supabase cria essa vari√°vel automaticamente (Porta 6543 - Pooler)
  url       = env("POSTGRES_PRISMA_URL") 
  
  // A integra√ß√£o cria essa vari√°vel automaticamente (Porta 5432 - Direct)
  directUrl = env("POSTGRES_URL_NON_POOLING") 
}

// üè¢ O CLIENTE DO SAAS (A Barbearia/Sal√£o)
model Tenant {
  id             String   @id @default(uuid())
  name           String
  slug           String   @unique
  planTier       String   @default("SOLO")
  createdAt      DateTime @default(now())
  
  // Configura√ß√µes Visuais
  primaryColor   String   @default("#000000") 
  secondaryColor String   @default("#ffffff")
  logoUrl        String?
  coverUrl       String?
  themeVariant   String   @default("BARBER")

  services       Service[]
  professionals  Professional[]
  customers      Customer[]
  appointments   Appointment[]
}

// üíá‚Äç‚ôÇÔ∏è OS PROFISSIONAIS
model Professional {
  id            String   @id @default(uuid())
  name          String
  photoUrl      String?
  isActive      Boolean  @default(true)
  tenantId      String
  tenant        Tenant   @relation(fields: [tenantId], references: [id])
  appointments  Appointment[]
  workHours     Json?
}

// ‚úÇÔ∏è OS SERVI√áOS
model Service {
  id            String   @id @default(uuid())
  name          String
  price         Decimal
  durationMin   Int
  description   String?
  tenantId      String
  tenant        Tenant   @relation(fields: [tenantId], references: [id])
  appointments  Appointment[]
}

// üìÖ OS AGENDAMENTOS
model Appointment {
  id             String   @id @default(uuid())
  date           DateTime
  status         String   @default("SCHEDULED")
  tenantId       String
  tenant         Tenant   @relation(fields: [tenantId], references: [id])
  professionalId String
  professional   Professional @relation(fields: [professionalId], references: [id])
  customerId     String
  customer       Customer @relation(fields: [customerId], references: [id])
  serviceId      String
  service        Service @relation(fields: [serviceId], references: [id])
}

// üë§ O CLIENTE FINAL
model Customer {
  id        String   @id @default(uuid())
  name      String
  phone     String
  tenantId  String
  tenant    Tenant   @relation(fields: [tenantId], references: [id])
  appointments Appointment[]
}